# VirtualTabs â€“ Organize Open Files into Smart Groups

> **è‡ªå®šç¾©æˆ–ä»¥å‰¯æª”ååˆ†ç¾¤é–‹å•Ÿä¸­çš„æª”æ¡ˆï¼Œè®“ VS Code ç·¨è¼¯ç’°å¢ƒäº•ç„¶æœ‰åºã€‚**

## ğŸ” å°ˆæ¡ˆç°¡ä»‹

**VirtualTabs** æ˜¯ä¸€æ¬¾ç°¡æ½”å¯¦ç”¨çš„ VS Code æ“´å……å¥—ä»¶ï¼Œå¯å°‡æ‰€æœ‰**ç›®å‰é–‹å•Ÿçš„æª”æ¡ˆä¾å‰¯æª”ååˆ†ç¾¤**ï¼Œä¸¦åœ¨å´é‚Šæ¬„æ–°å¢ã€ŒVirtual Tabsã€TreeView ä»‹é¢ã€‚é©åˆå¤šæª”æ¡ˆç·¨è¼¯ã€åˆ‡æ›é »ç¹çš„é–‹ç™¼å·¥ä½œæµç¨‹ï¼Œå¹«åŠ©ä½ æ›´å¿«é€Ÿå®šä½æª”æ¡ˆã€æ¸›å°‘èªçŸ¥è² æ“”ã€‚

---

## âœ¨ ä¸»è¦åŠŸèƒ½

* ğŸ“ **å‰¯æª”åè‡ªå‹•åˆ†ç¾¤**ï¼šä¾æ“šå‰¯æª”åï¼ˆå¦‚ `.ts`, `.json`ï¼‰å»ºç«‹ç¾¤çµ„ã€‚
* ğŸŒ² **TreeView é¡¯ç¤ºä»‹é¢**ï¼šæ–¼å´é‚Šæ¬„ Explorer ä¸­æ–°å¢ã€ŒVirtual Tabsã€è¦–åœ–ã€‚
* ğŸ–±ï¸ **å¯é»é¸å¿«é€Ÿé–‹æª”**ï¼šé»æ“Šç¯€é»å³å¯åˆ‡æ›è‡³å°æ‡‰æª”æ¡ˆã€‚
* ğŸ”„ **å³æ™‚åŒæ­¥ï¼ˆåƒ…é™ã€Œç›®å‰å·²é–‹å•Ÿæª”æ¡ˆã€ç¾¤çµ„ï¼‰**ï¼šé–‹å•Ÿã€é—œé–‰æª”æ¡ˆæ™‚ã€Œç›®å‰å·²é–‹å•Ÿæª”æ¡ˆã€ç¾¤çµ„æœƒè‡ªå‹•æ›´æ–°ã€‚è‡ªè¨‚ç¾¤çµ„éœ€æ‰‹å‹•åŠ å…¥/ç§»é™¤æª”æ¡ˆã€‚
* ğŸ—‚ï¸ **è‡ªè¨‚ç¾¤çµ„ç®¡ç†**ï¼šå¯æ–°å¢ã€åˆªé™¤ã€è¤‡è£½ã€é‡å‘½åè‡ªè¨‚ç¾¤çµ„ã€‚
* ğŸ–±ï¸ **å¤šé¸æª”æ¡ˆæ“ä½œ**ï¼šæ”¯æ´å¤šé¸æª”æ¡ˆä¸€éµé–‹å•Ÿã€é—œé–‰ã€ç§»é™¤ã€‚
* ğŸ—‘ï¸ **å–®ä¸€æª”æ¡ˆç§»é™¤**ï¼šéå…§å»ºç¾¤çµ„çš„æª”æ¡ˆå¯é€éå³éµé¸å–®æˆ–åƒåœ¾æ¡¶åœ–ç¤ºå¿«é€Ÿç§»é™¤ã€‚
* ğŸ–±ï¸ **æ‹–æ›³æª”æ¡ˆè‡³ç¾¤çµ„**ï¼šå¯å°‡æª”æ¡ˆæ‹–æ›³åˆ°è‡ªè¨‚ç¾¤çµ„é€²è¡Œåˆ†çµ„ã€‚
* ğŸ“‹ **è¤‡è£½æª”åï¼ç›¸å°è·¯å¾‘**ï¼šæª”æ¡ˆå³éµé¸å–®å¯å¿«é€Ÿè¤‡è£½æª”åæˆ–ç›¸å°è·¯å¾‘åˆ°å‰ªè²¼ç°¿ã€‚

### UI ç¯„ä¾‹åœ–

> ![åŠŸèƒ½æˆªåœ–](assets/demo.png)

---

## âš ï¸ æ³¨æ„äº‹é …

* åªæœ‰ã€Œç›®å‰å·²é–‹å•Ÿæª”æ¡ˆã€ç¾¤çµ„æœƒè‡ªå‹•åŒæ­¥ VS Code çš„é–‹å•Ÿ/é—œé–‰ç‹€æ…‹ã€‚
* å…¶ä»–è‡ªè¨‚ç¾¤çµ„éœ€æ‰‹å‹•åŠ å…¥ã€ç§»é™¤æª”æ¡ˆã€‚
* ç›®å‰åƒ…æ”¯æ´ä¾å‰¯æª”åè‡ªå‹•åˆ†ç¾¤ï¼Œå°šæœªæ”¯æ´ä»¥è³‡æ–™å¤¾è·¯å¾‘ã€é—œéµå­—ç­‰è‡ªè¨‚è¦å‰‡ã€‚

---

## âš™ï¸ å®‰è£èˆ‡ä½¿ç”¨

### 1. å®‰è£ä¾è³´

```bash
npm install
```

### 2. ç·¨è­¯åŸå§‹ç¢¼

```bash
npm run vscode:prepublish
```

### 3. å•Ÿå‹• Extension Host

æ–¼ VS Code æŒ‰ä¸‹ `F5`ï¼Œé–‹å•Ÿé–‹ç™¼è€…æ¨¡å¼ï¼Œå´é‚Šæ¬„å°‡å‡ºç¾ã€ŒVirtual Tabsã€è¦–åœ–ã€‚

---

## ğŸ§© æª”æ¡ˆçµæ§‹èˆ‡æ¨¡çµ„è¨­è¨ˆ

### ç›®éŒ„ç¸½è¦½

```text
editorGrouper/
â”œâ”€â”€ package.json           # æ“´å……å¥—ä»¶æè¿°èˆ‡è¨»å†Šé»
â”œâ”€â”€ tsconfig.json          # TypeScript ç·¨è­¯è¨­å®š
â”œâ”€â”€ readme.md              # ä½¿ç”¨èˆ‡é–‹ç™¼èªªæ˜
â”œâ”€â”€ architecture.md        # æ¶æ§‹æ–‡ä»¶
â””â”€â”€ src/
    â”œâ”€â”€ extension.ts       # æ“´å……å¥—ä»¶ä¸»ç¨‹å¼
    â”œâ”€â”€ types.ts           # è³‡æ–™çµæ§‹å®šç¾©
    â”œâ”€â”€ treeItems.ts       # TreeView é …ç›®å®šç¾©
    â”œâ”€â”€ provider.ts        # åˆ†ç¾¤è³‡æ–™èˆ‡ TreeView æä¾›è€…
    â”œâ”€â”€ dragAndDrop.ts     # æ‹–æ›³æ§åˆ¶å™¨
    â””â”€â”€ commands.ts        # æŒ‡ä»¤è¨»å†Šèˆ‡é‚è¼¯å¯¦ä½œ
```

### æ¨¡çµ„è·è²¬èªªæ˜

| æ¨¡çµ„æª”æ¡ˆ             | åŠŸèƒ½ç°¡è¿°                               |
| ---------------- | ---------------------------------- |
| `extension.ts`   | åˆå§‹åŒ– providerã€D&D æ§åˆ¶å™¨èˆ‡æŒ‡ä»¤è¨»å†Šã€‚        |
| `provider.ts`    | å¯¦ä½œ `TreeDataProvider`ï¼Œè² è²¬ç¾¤çµ„è³‡æ–™èˆ‡æ¨¹ç‹€çµæ§‹ã€‚ |
| `treeItems.ts`   | å®šç¾© `TreeItem` é¡åˆ¥ï¼Œæ§åˆ¶é¡¯ç¤ºèˆ‡äº’å‹•è¡Œç‚ºã€‚æ¯å€‹æª”æ¡ˆé …ç›®éƒ½è¨˜éŒ„å…¶æ‰€å±¬ç¾¤çµ„ç´¢å¼•ã€‚        |
| `types.ts`       | å®šç¾© `TempGroup` ç­‰å…±ç”¨è³‡æ–™çµæ§‹ã€‚            |
| `dragAndDrop.ts` | å¯¦ä½œæ‹–æ›³æ§åˆ¶é‚è¼¯ï¼ˆæ‹–æ›³æª”æ¡ˆè‡³ç¾¤çµ„ï¼‰ã€‚                 |
| `commands.ts`    | è¨»å†Šä¸¦è™•ç†å¦‚æ–°å¢ç¾¤çµ„ã€åˆªé™¤ç¾¤çµ„ã€å–®ä¸€æª”æ¡ˆç§»é™¤ç­‰ VS Code æŒ‡ä»¤ã€‚       |

### æ¨¡çµ„äº’å‹•åœ–

```mermaid
flowchart TD
    extension.ts --> provider.ts
    extension.ts --> dragAndDrop.ts
    extension.ts --> commands.ts
    provider.ts --> treeItems.ts
    provider.ts --> types.ts
    dragAndDrop.ts --> provider.ts
    dragAndDrop.ts --> treeItems.ts
    commands.ts --> provider.ts
    commands.ts --> treeItems.ts
    treeItems.ts --> types.ts
```

---

## ğŸ” è³‡æ–™æµç°¡ä»‹

1. `extension.ts` å•Ÿå‹•æ™‚åˆå§‹åŒ– `provider`ã€æ‹–æ›³æ§åˆ¶å™¨èˆ‡æŒ‡ä»¤ã€‚
2. `provider` è¼‰å…¥å·²é–‹å•Ÿæª”æ¡ˆï¼Œä¾å‰¯æª”ååˆ†ç¾¤ã€‚
3. ä½¿ç”¨è€…èˆ‡ UI äº’å‹•ï¼ˆå¦‚é»æ“Šã€æ‹–æ›³ã€æŒ‡ä»¤ï¼‰å°‡æ›´æ–° `provider` ä¸­çš„è³‡æ–™ã€‚
4. ç¾¤çµ„è³‡æ–™æ›´æ–°å¾Œï¼Œè‡ªå‹•å„²å­˜è‡³ `workspaceState` ä¸¦è§¸ç™¼ UI åˆ·æ–°ã€‚
5. è³‡æ–™çµæ§‹ï¼š

  ```mermaid
      flowchart TD
        %% è³‡æ–™å±¤
        TempGroup["TempGroup[] ç¾¤çµ„è³‡æ–™é™£åˆ—"] --> |åŒ…å«| Files["string[] æª”æ¡ˆURIé™£åˆ—"]
        TempGroup --> |æœ‰å±¬æ€§| GroupProperties["ç¾¤çµ„å±¬æ€§"]
        GroupProperties --> BuiltIn["builtIn?: boolean æ˜¯å¦ç‚ºå…§å»ºç¾¤çµ„"]
        GroupProperties --> Auto["auto?: boolean æ˜¯å¦ç‚ºè‡ªå‹•åˆ†ç¾¤"]
        GroupProperties --> Name["name: string ç¾¤çµ„åç¨±"]

        %% UIå±¤è½‰æ›
        TempFoldersProvider["TempFoldersProvider è³‡æ–™æä¾›è€…"] --> |ç®¡ç†| TempGroup
        TempFoldersProvider --> |è½‰æ›ç‚º| TreeItems["TreeItem UIå±¤"]

        %% TreeItem é¡å‹
        TreeItems --> FolderItem["TempFolderItem ç¾¤çµ„ç¯€é»"]
        TreeItems --> FileItem["TempFileItem æª”æ¡ˆç¯€é»"]

        %% æª”æ¡ˆç¯€é»çš„å±¬æ€§
        FileItem --> |åƒç…§| VSCodeUri["vscode.Uri æª”æ¡ˆè³‡æºä½å€"]
        FileItem --> |è¨˜éŒ„| GroupIndex["groupIdx: number æ‰€å±¬ç¾¤çµ„ç´¢å¼•"]

        %% æ“ä½œå±¤
        DragAndDrop["TempFoldersDragAndDropController æ‹–æ›³æ§åˆ¶å™¨"] --> |æ“ä½œ| TempFoldersProvider
        Commands["å‘½ä»¤è¨»å†Š"] --> |ç›´æ¥æ“ä½œ| TempGroup
        Commands --> |é€éç´¢å¼•å®šä½| GroupIndex

```

6. å¯¦éš›ä½¿ç”¨ç¯„ä¾‹ï¼š

**è³‡æ–™å±¤ (TempGroup)**ï¼š
é€™æ˜¯å¯¦éš›å„²å­˜çš„è³‡æ–™çµæ§‹ï¼Œå­˜åœ¨æ–¼è¨˜æ†¶é«”å’Œ workspaceState ä¸­ï¼š

```json
const groups: TempGroup[] = [
    {
        name: "ç›®å‰å·²é–‹å•Ÿæª”æ¡ˆ",  // ç¾¤çµ„åç¨±
        files: [
            "file:///c:/project/file1.ts",
            "file:///c:/project/file2.json"
        ],
        builtIn: true  // é€™æ˜¯å…§å»ºç¾¤çµ„
    },
    {
        name: "TypeScript æª”æ¡ˆ",  // è‡ªå‹•åˆ†é¡çš„ç¾¤çµ„
        files: [
            "file:///c:/project/file1.ts",
            "file:///c:/project/file3.ts"
        ],
        auto: true  // é€™æ˜¯è‡ªå‹•åˆ†ç¾¤ç¾¤çµ„
    },
    {
        name: "æˆ‘çš„è‡ªè¨‚ç¾¤çµ„",  // ä½¿ç”¨è€…è‡ªè¨‚ç¾¤çµ„
        files: [
            "file:///c:/project/file1.ts",
            "file:///c:/project/file2.json"
        ]
        // éå…§å»ºä¹Ÿéè‡ªå‹•
    }
];
```

**UI é¡¯ç¤ºå±¤ (TreeItems)**ï¼š
`TempGroup` è³‡æ–™æœƒè¢«è½‰æ›æˆ TreeView é …ç›®ä¾› VS Code é¡¯ç¤ºï¼š

```typescript
// ç¾¤çµ„ç¯€é» (å°æ‡‰ TempGroup)
new TempFolderItem("TypeScript æª”æ¡ˆ", 1, false)
    â”œâ”€â”€ new TempFileItem(Uri.file("file1.ts"), 1, false)  // æª”æ¡ˆç¯€é»ï¼Œè¨˜éŒ„ç¾¤çµ„ç´¢å¼•
    â””â”€â”€ new TempFileItem(Uri.file("file3.ts"), 1, false)  // æª”æ¡ˆç¯€é»ï¼Œè¨˜éŒ„ç¾¤çµ„ç´¢å¼•
```

**è½‰æ›æµç¨‹**ï¼š

1. `TempGroup[]` è³‡æ–™ â†’ `TempFoldersProvider.getChildren()`
2. â†’ `TempFolderItem` (ç¾¤çµ„ç¯€é») + `TempFileItem[]` (æª”æ¡ˆç¯€é»)
3. â†’ VS Code TreeView é¡¯ç¤º

---

## ğŸ› ï¸ è¨­å®šèˆ‡é…ç½®

### package.jsonï¼ˆé‡é»ç¯€éŒ„ï¼‰

```json
{
  "name": "virtual-tabs",
  "displayName": "VirtualTabs",
  "description": "Group open tabs by file type in a sidebar view",
  "main": "./dist/extension.js",
  "activationEvents": ["*"],
  "contributes": {
    "views": {
      "explorer": [
        {
          "id": "virtualTabsView",
          "name": "Grouped Tabs"
        }
      ]
    }
  }
}
```

### tsconfig.json

```json
{
  "compilerOptions": {
    "target": "ES6",
    "module": "commonjs",
    "outDir": "dist",
    "rootDir": "src",
    "strict": true
  },
  "include": ["src"]
}
```

---

## â“ å¸¸è¦‹å•é¡Œï¼ˆFAQï¼‰

### ç‚ºä»€éº¼æ²’æœ‰çœ‹åˆ°ã€ŒGrouped Tabsã€è¦–åœ–ï¼Ÿ

è«‹ç¢ºèªæ˜¯å¦æ­£ç¢ºå•Ÿå‹• Extension Hostï¼ˆæŒ‰ä¸‹ `F5`ï¼‰ï¼Œä¸¦æŸ¥çœ‹å·¦å´é‚Šæ¬„çš„ Explorer åˆ†é ã€‚

### å¯ä»¥è‡ªè¨‚åˆ†ç¾¤é‚è¼¯å—ï¼Ÿ

ç›®å‰åƒ…æ”¯æ´ä¾æ“šå‰¯æª”åè‡ªå‹•åˆ†ç¾¤ã€‚æœªä¾†å°‡åŠ å…¥ä»¥**è³‡æ–™å¤¾è·¯å¾‘**ã€**é—œéµå­—**ç­‰è‡ªè¨‚è¦å‰‡ã€‚

### å¦‚ä½•ç§»é™¤ç¾¤çµ„ä¸­çš„å–®ä¸€æª”æ¡ˆï¼Ÿ

å°æ–¼éå…§å»ºç¾¤çµ„ï¼ˆå¦‚è‡ªè¨‚ç¾¤çµ„ï¼‰ï¼Œæ‚¨å¯ä»¥ï¼š

1. åœ¨æª”æ¡ˆé …ç›®ä¸Šå³éµé»æ“Šï¼Œé¸æ“‡ã€Œå¾ç¾¤çµ„ç§»é™¤æª”æ¡ˆã€
2. é»æ“Šæª”æ¡ˆé …ç›®æ—çš„åƒåœ¾æ¡¶åœ–ç¤º
æ³¨æ„ï¼šã€Œç›®å‰å·²é–‹å•Ÿæª”æ¡ˆã€ç­‰å…§å»ºç¾¤çµ„ä¸æ”¯æ´å–®ä¸€æª”æ¡ˆç§»é™¤ã€‚

---

## ğŸ”§ æœªä¾†è¦åŠƒ

* ğŸ§© è‡ªè¨‚åˆ†ç¾¤æ¢ä»¶ï¼ˆè·¯å¾‘/é—œéµå­—/æ­£å‰‡ç­‰ï¼‰
* âš™ï¸ è¨­å®šä»‹é¢ï¼šå¯è¦–åŒ–é…ç½®åˆ†ç¾¤é‚è¼¯
* ğŸ” å„²å­˜/é‚„åŸåˆ†ç¾¤è¨­å®š

---

## ğŸ¤ è²¢ç»æ–¹å¼

æˆ‘å€‘æ­¡è¿ä»»ä½•å½¢å¼çš„è²¢ç»ï¼

* ğŸ’¬ å›å ±éŒ¯èª¤èˆ‡éœ€æ±‚ï¼šè«‹é€é [GitHub Issues](https://github.com/winterdrive/virtual-tabs/issues)ã€‚
* âœ¨ æ–°åŠŸèƒ½æˆ–æ”¹å–„ UIï¼šæ­¡è¿æå‡º [Pull Request](https://github.com/winterdrive/virtual-tabs/pulls)ã€‚
* ğŸ“– æ–‡ä»¶æ”¹é€²ï¼šç™¼ç¾æ•˜è¿°ä¸æ¸…æ­¡è¿å”åŠ©ä¿®æ­£ã€‚

---

## ğŸ“„ æˆæ¬Šæ¢æ¬¾

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šï¼Œå¯è‡ªç”±ä½¿ç”¨ã€ä¿®æ”¹èˆ‡å†ç™¼ä½ˆã€‚

---
